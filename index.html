<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlassBoard - Dark Mode Task Manager</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: 1px solid rgba(255, 255, 255, 0.1);
            --glass-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            --text-color: #e0e0e0;
            --accent-color: #a855f7; /* Purple accent */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            /* Deep Dark Gradient Background */
            background: radial-gradient(circle at 10% 20%, rgb(30, 30, 40) 0%, rgb(10, 10, 15) 90%);
            color: var(--text-color);
            height: 100vh;
            overflow: hidden; /* Horizontal scroll handled by board */
            display: flex;
            flex-direction: column;
        }

        /* --- Header --- */
        header {
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border-bottom: var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        h1 { margin: 0; font-size: 1.5rem; letter-spacing: 1px; }

        /* --- Main Board Area --- */
        #board {
            flex-grow: 1;
            padding: 20px;
            overflow-x: auto;
            overflow-y: hidden;
            white-space: nowrap;
            display: flex;
            align-items: flex-start;
            gap: 20px;
        }

        /* Custom Scrollbar */
        #board::-webkit-scrollbar { height: 12px; }
        #board::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
        #board::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        /* --- Lists (Columns) --- */
        .list {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: var(--glass-border);
            box-shadow: var(--glass-shadow);
            border-radius: 12px;
            width: 300px;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            max-height: 100%;
            transition: transform 0.2s;
        }

        .list-header {
            padding: 15px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: grab;
        }

        .delete-list-btn {
            background: transparent;
            border: none;
            color: #ff5f5f;
            cursor: pointer;
            font-size: 1.2rem;
            opacity: 0.5;
            transition: 0.2s;
        }
        .delete-list-btn:hover { opacity: 1; }

        .list-cards {
            flex-grow: 1;
            padding: 0 10px 10px 10px;
            overflow-y: auto;
            min-height: 50px; /* Drop zone size */
        }

        /* --- Cards (Tasks) --- */
        .card {
            background: rgba(255, 255, 255, 0.08);
            margin-bottom: 10px;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.05);
            cursor: pointer;
            white-space: normal;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .card-actions { opacity: 0; transition: 0.2s; }
        .card:hover .card-actions { opacity: 1; }
        
        .delete-card-btn {
            color: #ff5f5f;
            cursor: pointer;
            margin-left: 8px;
        }

        /* --- Inputs --- */
        .add-card-container {
            padding: 10px;
            border-top: 1px solid rgba(255,255,255,0.05);
        }

        input[type="text"] {
            width: 100%;
            background: rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
            padding: 10px;
            border-radius: 6px;
            box-sizing: border-box;
            outline: none;
        }

        input[type="text"]::placeholder { color: rgba(255,255,255,0.3); }
        input[type="text"]:focus { border-color: var(--accent-color); }

        /* Add List Button/Form */
        .add-list-wrapper {
            min-width: 300px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            border: 1px dashed rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.2s;
        }
        .add-list-wrapper:hover { background: rgba(255,255,255,0.1); }

        /* Dragging Classes (SortableJS) */
        .sortable-ghost { opacity: 0.4; background: var(--accent-color); }
        .sortable-drag { cursor: grabbing; opacity: 1; background: #2d2d3a; }

    </style>
</head>
<body>

<header>
    <h1>GlassBoard</h1>
    <div style="font-size: 0.9rem; opacity: 0.7;">Drag & Drop Enabled</div>
</header>

<div id="board">
    <div class="list">
        <div class="list-header">
            To Do <button class="delete-list-btn" onclick="deleteList(this)">Ã—</button>
        </div>
        <div class="list-cards" id="list-1">
            <div class="card">
                <span>Welcome to GlassBoard!</span>
                <div class="card-actions"><span class="delete-card-btn" onclick="deleteCard(this)">ðŸ—‘</span></div>
            </div>
            <div class="card">
                <span>Try dragging this card to another list.</span>
                <div class="card-actions"><span class="delete-card-btn" onclick="deleteCard(this)">ðŸ—‘</span></div>
            </div>
        </div>
        <div class="add-card-container">
            <input type="text" placeholder="+ Add a card..." onkeypress="handleCardInput(event, this)">
        </div>
    </div>

    <div class="list">
        <div class="list-header">
            In Progress <button class="delete-list-btn" onclick="deleteList(this)">Ã—</button>
        </div>
        <div class="list-cards" id="list-2">
            <div class="card">
                <span>Review Code</span>
                <div class="card-actions"><span class="delete-card-btn" onclick="deleteCard(this)">ðŸ—‘</span></div>
            </div>
        </div>
        <div class="add-card-container">
            <input type="text" placeholder="+ Add a card..." onkeypress="handleCardInput(event, this)">
        </div>
    </div>

    <div class="add-list-wrapper" id="add-list-btn" onclick="createNewList()">
        <span style="font-weight: bold;">+ Add another list</span>
    </div>
</div>

<script>
    const board = document.getElementById('board');
    
    // --- Initialize Drag and Drop (SortableJS) ---
    
    // 1. Make Lists Sortable (Horizontal)
    new Sortable(board, {
        animation: 150,
        handle: '.list-header', // Drag via header only
        draggable: '.list', // Only dragging items with class .list
        ghostClass: 'sortable-ghost',
        filter: '.add-list-wrapper' // Don't drag the 'Add List' button
    });

    // 2. Make Cards Sortable (Vertical, between lists)
    function initSortableCards(element) {
        new Sortable(element, {
            group: 'shared', // Allow dragging between lists
            animation: 150,
            ghostClass: 'sortable-ghost'
        });
    }

    // Initialize existing lists
    document.querySelectorAll('.list-cards').forEach(initSortableCards);

    // --- Core Logic ---

    // Create New List
    function createNewList() {
        const title = prompt("Enter list title:");
        if (!title) return;

        const wrapper = document.createElement('div');
        wrapper.className = 'list';
        wrapper.innerHTML = `
            <div class="list-header">
                ${title} <button class="delete-list-btn" onclick="deleteList(this)">Ã—</button>
            </div>
            <div class="list-cards"></div>
            <div class="add-card-container">
                <input type="text" placeholder="+ Add a card..." onkeypress="handleCardInput(event, this)">
            </div>
        `;

        // Insert before the "Add List" button
        const addBtn = document.getElementById('add-list-btn');
        board.insertBefore(wrapper, addBtn);

        // Initialize drag & drop for the new list
        initSortableCards(wrapper.querySelector('.list-cards'));
    }

    // Add New Card (Event Handler)
    function handleCardInput(event, inputElement) {
        if (event.key === 'Enter' && inputElement.value.trim() !== "") {
            addCard(inputElement.closest('.list').querySelector('.list-cards'), inputElement.value);
            inputElement.value = ""; // Clear input
        }
    }

    // Add Card Logic
    function addCard(container, text) {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <span>${text}</span>
            <div class="card-actions"><span class="delete-card-btn" onclick="deleteCard(this)">ðŸ—‘</span></div>
        `;
        container.appendChild(card);
    }

    // Delete List
    function deleteList(btn) {
        if(confirm("Are you sure you want to delete this list?")) {
            btn.closest('.list').remove();
        }
    }

    // Delete Card
    function deleteCard(btn) {
        btn.closest('.card').remove();
    }

</script>
</body>
</html>
