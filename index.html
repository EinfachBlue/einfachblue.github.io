<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Organizer</title>

<style>
:root {
  --bg: #0d1117;
  --column: #161b22;
  --card: #1f6feb;
  --card-text: #ffffff;
  --accent: #58a6ff;
  --border: #30363d;
}

* {
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
}

body {
  margin: 0;
  background: var(--bg);
  color: white;
}

header {
  padding: 14px;
  background: #010409;
  border-bottom: 1px solid var(--border);
  text-align: center;
  font-weight: bold;
  color: var(--accent);
}

.board {
  display: flex;
  gap: 12px;
  padding: 12px;
  overflow-x: auto;
}

.column {
  background: var(--column);
  border-radius: 10px;
  padding: 10px;
  width: 300px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
}

.column h2 {
  margin: 0 0 10px;
  font-size: 15px;
  color: var(--accent);
}

.cards {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-height: 40px;
}

.card {
  background: var(--card);
  color: var(--card-text);
  padding: 10px;
  border-radius: 8px;
  touch-action: none;
  user-select: none;
}

.card.dragging {
  opacity: 0.6;
  position: fixed;
  z-index: 1000;
  pointer-events: none;
}

.add input {
  width: 100%;
  padding: 7px;
  border-radius: 6px;
  border: 1px solid var(--border);
  background: #010409;
  color: white;
}

.add button {
  margin-top: 6px;
  width: 100%;
  padding: 7px;
  border-radius: 6px;
  border: none;
  background: var(--accent);
  color: black;
  font-weight: bold;
}

@media (max-width: 768px) {
  .board {
    flex-direction: column;
  }
  .column {
    width: 100%;
  }
}
</style>
</head>
<body>

<header>Organizer</header>

<div class="board">
  <div class="column" data-status="todo">
    <h2>To-do</h2>
    <div class="cards"></div>
    <div class="add">
      <input placeholder="New task">
      <button>Add</button>
    </div>
  </div>

  <div class="column" data-status="working">
    <h2>Working on</h2>
    <div class="cards"></div>
    <div class="add">
      <input placeholder="New task">
      <button>Add</button>
    </div>
  </div>

  <div class="column" data-status="done">
    <h2>Finished</h2>
    <div class="cards"></div>
    <div class="add">
      <input placeholder="New task">
      <button>Add</button>
    </div>
  </div>
</div>

<script>
let dragged = null;
let offsetX = 0;
let offsetY = 0;

document.querySelectorAll(".add button").forEach(btn => {
  btn.onclick = () => {
    const input = btn.previousElementSibling;
    if (!input.value.trim()) return;
    createCard(input.value, btn.closest(".column").dataset.status);
    input.value = "";
    save();
  };
});

function createCard(text, status) {
  const card = document.createElement("div");
  card.className = "card";
  card.textContent = text;

  card.onpointerdown = e => {
    dragged = card;
    const r = card.getBoundingClientRect();
    offsetX = e.clientX - r.left;
    offsetY = e.clientY - r.top;
    card.classList.add("dragging");
    move(e);
  };

  document.addEventListener("pointermove", move);
  document.addEventListener("pointerup", drop);

  getColumn(status).appendChild(card);
}

function move(e) {
  if (!dragged) return;
  dragged.style.left = e.clientX - offsetX + "px";
  dragged.style.top = e.clientY - offsetY + "px";
}

function drop(e) {
  if (!dragged) return;

  dragged.classList.remove("dragging");
  dragged.style.left = "";
  dragged.style.top = "";

  const target = document.elementFromPoint(e.clientX, e.clientY);
  const column = target?.closest(".column");
  if (column) {
    column.querySelector(".cards").appendChild(dragged);
    save();
  }

  dragged = null;
}

function getColumn(status) {
  return document.querySelector(`[data-status="${status}"] .cards`);
}

function save() {
  const data = {};
  document.querySelectorAll(".column").forEach(col => {
    data[col.dataset.status] =
      [...col.querySelectorAll(".card")].map(c => c.textContent);
  });
  localStorage.setItem("organizer", JSON.stringify(data));
}

function load() {
  const data = JSON.parse(localStorage.getItem("organizer") || "{}");
  Object.entries(data).forEach(([status, cards]) =>
    cards.forEach(text => createCard(text, status))
  );
}

load();
</script>

</body>
</html>